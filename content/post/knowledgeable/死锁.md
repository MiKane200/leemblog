## 死锁产生的四个条件（破坏其中一个就能避免死锁产生）
1. 互斥条件
2. 占有和等待条件
3. 不剥夺条件
4. 循环等待条件

## 避免死锁方法
1. 静态分配：将一个进程所需要的资源一次性分配给他，破坏了第2个死锁产生条件
2. 层次分配：（破坏了第4个死锁产生条件）
    1. 将资源排序
    2. 一个进程只能得到某一层的一个资源后，才能申请较高层次的资源
    3. 释放资源时，必须先释放所占用的较高层次的资源
    4. 当一个进程获得了某一层的一个资源后，想再申请该层的另一个资源，那么必须先释放该层中的已占有资源
3. 当不能防止死锁产生时，先去测试系统状态，若分配后会产生死锁就不予分配。

## 银行家算法 -- 只借钱给有能力还钱的客户（上面的第3种方法）
1. 系统首先检查申请者对资源的最大需求量，如果现有资源能满足则分配。
2. 如果不满足，则只是在申请者能无条件归还它所申请的所有资源时，才分配资源给它。
比如：
这一类资源一共有10个
进程|已占资源|还需要申请数才能完成
P   |   4   |   4   |
Q   |   2   |   2   |
R   |   2   |   7   |

这时候系统还剩下10-4-2-2=2个资源，只有分配给Q才是安全的，所以分配之后，Q结束释放4个资源，分配给P，P结束，系统剩余8个，再分配给R结束程序。

## 死锁检测
1. 生成两张表，等待资源表和占用资源表
2. 进程申请时，检测申请的那个资源是否被占用，没有占用就分配（填入占用资源表），反之就将进程填入等待资源表
3. 死锁检测程序：
    1. 有Pi等待rk资源的话，且rk被Pj占用，则说明Pi与Pj有等待占用关系，记为W(Pi,Pj)
    2. 死锁检测程序反复检测两张表



银行家算法：避免死锁
资源有序分配法：预防死锁
资源分配图化简法：检测死锁
撤销进程法：解决死锁

在解决死锁的方法中，死锁的预防是设法至少破坏产生死锁的必要条件之一，严格预防死锁出现。银行家算法属于死锁的避免，不那么严格地限制产生死锁的必要条件的存在，而是在系统运行过程中小心地避免死锁的最终发生。死锁检测算法，允许死锁发生，定期检测。所以，只有资源有序分配法属于预防死锁的策略。